---
title: "___"
author: "Pierre Vandenberghe, Théo Galand, Arthur Ohmann, Jérôme Borgniet"
format:
  pdf:
    documentclass: report
    toc: true
editor: visual
lang: fr
bibliography: references.bib
---

```{r setup, include=FALSE}
# Ceci est nécessaire pour les tests SDD, ne pas utiliser dans un "vrai" projet
if (!"tools:tests" %in% search())
  source(here::here("tests/tools_tests.R"), attach(NULL, name = "tools:tests"))

# Configure Knitr to use AGG as graphic device
knitr::opts_chunk$set(dev = "ragg_png")

# Configuration de l'environnement
SciViews::R("model", lang = "fr")
```

```{r import}
# Lecture des données
ant <- read$rds("data/ant.rds")
# Tableau des premières et dernières lignes
tabularise$headtail(ant)
```

<!--# Un rapport est différent d'un carnet de notes. Il ne s'agit donc pas de faire du copier-coller d'un document vers l'autre. Un rapport de synthèse doit être compréhensible sans devoir lire le carnet de notes. Le rapport de synthèse doit être  rédigé avec un style et une présentation adéquats. -->

## Introduction

<!--% Rédigez l'introduction de ce rapport en 5-6 phrases.-->

La différenciation taxonomique des fourmis (Formicidae) repose largement sur l'analyse de traits morphologiques mesurables et de leurs variations. Ces relations biométriques entre les différents segments corporels constituent une base essentielle pour la classification des espèces.

Le jeu de données analysé ici rassemble les mesures morphométriques précises de 339 espèces, échantillonnées au travers de trois environnements distincts. Cette approche permet de confronter la variabilité phénotypique interspécifique aux contraintes écologiques imposées par le milieu de vie.

<!--% Rédigez le but de ce rapport en 2 phrases.-->

## But

Le but de ce rapport est d'identifier les facteurs influençant la morphologie des différentes fourmis et de présenter les deux modèles que nous pensons les plus pertinents de notre bloc-notes pour justifier cela. Nous avons utilisé les données récoltées par Bishop T. et Ewers R.

## Matériel et méthodes

<!--% Cette section doit comprendre deux parties. La première partie doit expliciter les données employées et la seconde traiter des analyses réalisées et des logiciels employés.-->

Les données ont été trouvées sur le site : <https://zenodo.org.> Les données ont été remaniées et modifiées dans le dossier import.R. Nous avons essentiellement utilisés les données liées à la morphométrie par rapport aux différents environnements. Nous réalisons l'analyse avec le logiciel R (r R.version.string) et en particulier le package {modelit} version r packageVersion("modelit") dans la SciViews Box 2025. Saturn Cloud (Linux Ubuntu 22.04) est utilisé pour exécuter le code et compiler la version finale de ce rapport.

## Résultats

<!--% Présentez les deux modèles les plus pertinents que vous avez sélectionnés. Structurez la section en deux parties avec deux titres de niveau trois.-->

## Modèle 1

#résumé de la régression linéaire

```{r tab1}
ant_lm1 <- lm(data = ant, head_length ~ mandible_length * environnement)
summary_(ant_lm1) |> tabularise()
```
#| tab-1: "Paramètres du modèle linéaire multiple testant l'effet de l'environnement sur la relation allométrique tête-mandibule."

#graphique de la régression linéaire

```{r fig1}
chart(data = ant, head_length ~ mandible_length %col=% environnement) +
  geom_point() +
  stat_smooth(method = "lm", formula = y ~ x)
```
#| fig-1: "Relation allométrique entre la longueur de la tête et la longueur de la mandibule selon les trois types d'environnements (lignes de régression linéaire)."

#équation de la régression linéaire 
$$
`r eq__(ant_lm1, use_coefs = TRUE)`
$$


- Nous avons comparé la longueur de la tête avec la longueur de la mandibule et séparé les trois types d'environnement (tab1).
- Avec le résumé de données, nous pouvons voir que le type d'environnement choisi pour la base est logged forest et que oil palm plantation n'est pas significativement différent (β2 a une valeur de p de 7.64 .10^-1 et β4 a une valeur de p de 8.04 .10^-1) (tab1). 
- L'environnement primary est significativement différent (β3 a une valeur de p de 7.33 .10^-7 et β5 a une valeur de p de 7.47 .10^-11) (tab1). 
- Le graphique du modèle linéaire nous montre que la régression linéaire du rapport longueur de tête / longueur de la mandibule est plus élevé dans l'environnement primary forest que logged forest et oil palm plantation qui ont une régression linéaire très similaire (fig1). 

## Modèle 2

#résumé du modèle linéaire généralisé

```{r tab2}
model_bino <- glm(data = ant, sting ~ webers_length + environnement , family = binomial)
  tabularise(summary_(model_bino))

```
#| tab-2: "Résultats de la régression logistique (GLM Binomial) modélisant la probabilité de présence du dard en fonction de la taille (Weber) et de l'environnement."

#équation du modèle 
$$
`r eq__(model_bino, use_coefs = TRUE, coef_digits = c(2, 2, 2, 2, 2, 2, 2), origdata = ant)`
$$ 
- le paramètre alpha (significatif) indique les chances d'avoir un dard pour une fourmis de référence (donc de taille moyenne et en logged forest). Au vu de notre modèle et grace à la fonction logit : nous déterminons que notre fourmis de référence a \~82% de chances de posséder un dard (tab2).

-   Le terme Béta 1 (significatif également) indique les chances d'avoir un dard en fonction de la longueur. Pour chaque mm de plus sur notre fourmis, les chances sont de e\*-0.321 d'avoir un dard sont de 0,725. Donc pour chaque mm, les chances de posséder un dard diminuent de \~27% (tab2).

-   Le terme Béta 2 (significatif aussi) indique les chances que des fourmis des plantations de palmiers de posséder un dard. Cette valeur est négative et montre donc que les fourmis ont e\*-0.658 chances en moins d'avoir un dard par rapport aux fourmis de forets exploitées soit 52% (tab2).

-   Le paramètre Béta 3 n'étant pas significatif nous ne pouvons pas affirmer que les fourmis de forets primaires ont plus de chances d'avoir un dard que celles des forets exploitées (tab2).

-   Notre modèle est bien aligné dans nos données ; nous ne sommes pas en situation de surdispersion (Déviance/ddl = 1.096) (tab2). 

## Discussion et Conclusion

<!--% En tenant compte du but de votre carnet de notes et de vos résultats, discutez de résultats et proposez des conclusions à votre analyse en 5 à 10 phrases. -->

## Bibliographie
